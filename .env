# ===========================================
# EVOLUTION API - CONFIGURAÇÃO DE AMBIENTE
# ===========================================

# ===========================================
# SERVIDOR
# ===========================================
SERVER_NAME=evolution
SERVER_TYPE=http
SERVER_PORT=8080
SERVER_URL=https://drsem.server.andromind.mx/evolution
BASE_URL_PREFIX=/evolution
SERVER_DISABLE_DOCS=false
SERVER_DISABLE_MANAGER=false

# ===========================================
# CORS
# ===========================================
CORS_ORIGIN=*
CORS_METHODS=POST,GET,PUT,DELETE
CORS_CREDENTIALS=true

# ===========================================
# SSL (opcional)
# ===========================================
SSL_CONF_PRIVKEY=
SSL_CONF_FULLCHAIN=

# ===========================================
# BANCO DE DADOS
# ===========================================
DATABASE_ENABLED=true
DATABASE_PROVIDER=postgresql
DATABASE_CONNECTION_URI=postgresql://evolution:evolution@localhost:5432/evolution_api
DATABASE_CONNECTION_CLIENT_NAME=evolution

# Configurações de salvamento de dados
DATABASE_SAVE_DATA_INSTANCE=true
DATABASE_SAVE_DATA_NEW_MESSAGE=true
DATABASE_SAVE_MESSAGE_UPDATE=true
DATABASE_SAVE_DATA_CONTACTS=true
DATABASE_SAVE_DATA_CHATS=true
DATABASE_SAVE_DATA_HISTORIC=true
DATABASE_SAVE_DATA_LABELS=true
DATABASE_SAVE_IS_ON_WHATSAPP=true
DATABASE_SAVE_IS_ON_WHATSAPP_DAYS=7
DATABASE_DELETE_MESSAGE=false

# ===========================================
# REDIS
# ===========================================
CACHE_REDIS_ENABLE=true
CACHE_REDIS_URI=redis://localhost:6379
CACHE_REDIS_PREFIX_KEY=evolution-cache
CACHE_REDIS_TTL=604800
CACHE_REDIS_SAVE_INSTANCES=true

# Cache local (fallback)
CACHE_LOCAL_ENABLED=true
CACHE_LOCAL_TTL=86400

# ===========================================
# AUTENTICAÇÃO
# ===========================================
AUTHENTICATION_API_KEY=BQYHJGJHJ
AUTHENTICATION_EXPOSE_IN_FETCH_INSTANCES=false

# ===========================================
# LOGS
# ===========================================
LOG_LEVEL=ERROR,WARN,DEBUG,INFO,LOG,VERBOSE,DARK
LOG_COLOR=true
LOG_BAILEYS=error

# ===========================================
# INSTÂNCIAS
# ===========================================
DEL_INSTANCE=false
DEL_TEMP_INSTANCES=true

# ===========================================
# IDIOMA
# ===========================================
LANGUAGE=es

# ===========================================
# WEBHOOK
# ===========================================
WEBHOOK_GLOBAL_ENABLED=true
#WEBHOOK_GLOBAL_URL=https://server.omaka.mx/citas-andromind/webhook
WEBHOOK_GLOBAL_URL=https://36c99391928e.ngrok-free.app/webhook
WEBHOOK_GLOBAL_WEBHOOK_BY_EVENTS=false

# Eventos recomendados (para tu sistema de agendado)
WEBHOOK_EVENTS_APPLICATION_STARTUP=true
WEBHOOK_EVENTS_INSTANCE_CREATE=true
WEBHOOK_EVENTS_QRCODE_UPDATED=true
WEBHOOK_EVENTS_CONNECTION_UPDATE=true
WEBHOOK_EVENTS_MESSAGES_UPSERT=true
WEBHOOK_EVENTS_SEND_MESSAGE=true
WEBHOOK_EVENTS_SEND_MESSAGE_UPDATE=true
WEBHOOK_EVENTS_ERRORS=true

# Configurações de webhook
WEBHOOK_REQUEST_TIMEOUT_MS=30000
WEBHOOK_RETRY_MAX_ATTEMPTS=10
WEBHOOK_RETRY_INITIAL_DELAY_SECONDS=5
WEBHOOK_RETRY_USE_EXPONENTIAL_BACKOFF=true
WEBHOOK_RETRY_MAX_DELAY_SECONDS=300
WEBHOOK_RETRY_JITTER_FACTOR=0.2
WEBHOOK_RETRY_NON_RETRYABLE_STATUS_CODES=400,401,403,404,422
# ===========================================
# WEBSOCKET
# ===========================================
WEBSOCKET_ENABLED=true
WEBSOCKET_GLOBAL_EVENTS=true
WEBSOCKET_ALLOWED_HOSTS=

# ===========================================
# DATA PATH (almacenamiento local de sesiones)
# ===========================================
STORE_CLEANING_INTERVAL=7200
STORE_CLEANING_TERMINAL=false

# ===========================================
# CHROME - CONFIGURACIÓN CRÍTICA PARA DROPLET
# ===========================================
CHROME_ARGS=--no-sandbox,--disable-setuid-sandbox,--disable-dev-shm-usage,--disable-accelerated-2d-canvas,--no-first-run,--no-zygote,--single-process,--disable-gpu,--disable-extensions
CHROME_HEADLESS=new

# ===========================================
# WHATSAPP BUSINESS
# ===========================================
WA_BUSINESS_TOKEN_WEBHOOK=evolution
WA_BUSINESS_URL=https://graph.facebook.com
WA_BUSINESS_VERSION=v18.0
WA_BUSINESS_LANGUAGE=es

# ===========================================
# CONFIGURAÇÕES DE SESSÃO
# ===========================================
CONFIG_SESSION_PHONE_CLIENT=Evolution API
CONFIG_SESSION_PHONE_NAME=Chrome

# ===========================================
# QR CODE
# ===========================================
QRCODE_LIMIT=30
QRCODE_COLOR=#198754

# ===========================================
# INTEGRAÇÕES (desactivadas)
# ===========================================
TYPEBOT_ENABLED=false
CHATWOOT_ENABLED=false
OPENAI_ENABLED=false
N8N_ENABLED=false
EVOAI_ENABLED=false
FLOWISE_ENABLED=false

# ===========================================
# S3 / MINIO
# ===========================================
S3_ENABLED=false

# ===========================================
# MÉTRICAS
# ===========================================
PROMETHEUS_METRICS=false

# ===========================================
# TELEMETRIA
# ===========================================
TELEMETRY_ENABLED=false

# ===========================================
# EVENT EMITTER
# ===========================================
EVENT_EMITTER_MAX_LISTENERS=100

# ===========================================
# PROVIDER
# ===========================================
PROVIDER_ENABLED=false

# ===========================================
# DATA PATH (almacenamiento local de sesiones)
# ===========================================
STORE_CLEANING_INTERVAL=7200
STORE_CLEANING_TERMINAL=false

# ===========================================
# CHROME - CONFIGURACIÓN CRÍTICA PARA DROPLET
# ===========================================
CHROME_ARGS=--no-sandbox,--disable-setuid-sandbox,--disable-dev-shm-usage,--disable-gpu,--no-zygote,--disable-software-rasterizer
CHROME_PATH=/usr/bin/chromium-browser
CHROME_HEADLESS=new
